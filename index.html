<!DOCTYPE html>
<html>
<body>
  <input type="text" id="input" placeholder="输入问题">
  <button onclick="callAPI()">发送</button>
  <div id="output"></div>
 
  <script>
    async function callAPI() {
      const apiKey = "sk-40073cc5d1d34e028f5a6c4c1e5f2bf4";  // 替换为真实密钥 
      const inputText = document.getElementById('input').value; 
      
      try {
        const response = await fetch('https://api.deepseek.com/v1/chat/completions',  {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${apiKey}`
          },
          body: JSON.stringify({ 
            model: "deepseek-chat",
            messages: [{ role: "user", content: inputText }],
            stream: true  // 启用流式输出 
          })
        });
 
        const reader = response.body.getReader(); 
        while (true) {
          const { done, value } = await reader.read(); 
          if (done) break;
          const chunk = new TextDecoder().decode(value);
          document.getElementById('output').innerText  += JSON.parse(chunk).choices[0].delta.content; 
        }
      } catch (error) {
        console.error(' 请求失败:', error);
      }
    }
  </script>
</body>
</html>